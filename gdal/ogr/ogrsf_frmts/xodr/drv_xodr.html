<!DOCTYPE html>
<!--/******************************************************************************
 * $Id$
 *
 * Project:  OpenGIS Simple Features for OpenDRIVE
 * Purpose:  Usage documentation of the XODR OpenDRIVE driver.
 * Author:   Michael Scholz, michael.scholz@dlr.de, German Aerospace Center (DLR)
 *			 Cristhian Eduardo Murcia Galeano, cristhianmurcia182@gmail.com
 *			 Ana Maria Orozco, ana.orozco.net@gmail.com
 *
 ******************************************************************************
 * Copyright 2017 German Aerospace Center (DLR), Institute of Transportation Systems 
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ****************************************************************************/-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>XODR – OpenDRIVE Exchange Format</title>
    <meta name="description" content="XODR Driver Guidelines.">
    <link rel="stylesheet" href="main.css">
</head>
<body>

    <h1>XODR – OpenDRIVE Road Description Format</h1>

    <p>
        <a href="http://opendrive.org/">OpenDRIVE</a> is an open format for the logical description of road networks. Over the last decade it has been widely used by transportation and automobile companies around the world, thus, becoming a de facto standard for driving simulation applications. OpenDRIVE files are stored using the Extensible Markup Language XML. These files describe roads as a collection of nodes associated to a particular category such as reference line, lane, feature and controller.
    </p>

    <p>
        With the XODR library OGR features support for reading of certain OpenDRIVE elements.  <em>XODR is especially useful for converting OpenDRIVE files into common GIS formats such as ESRI Shapefiles.</em>
    </p>

    <p>
        At this stage, the version supported by the XODR driver is OpenDRIVE 1.4.          
    </p>

    <h3>Supported OpenDRIVE elements</h3>

    <p>
        The XODR driver supports reading/sampling of geometrical OpenDRIVE elements into 2-dimensional geometry types. These designated OpenDRIVE elements also serve as <strong>layer creation options</strong>:
    </p>
    <ul>
        <li><em>referenceLine</em>:<b> </b>Retrieves a road's reference line <code>&lt;planView&gt;</code> geometries as wkbMultiLineString. </li>
        <li><em>lane</em>: Retrieves a road lane's outer border snippets as a wkbMultiLineString. The driver supports both, lanes defined through <code>&lt;width&gt;</code> or <code>&lt;border&gt;</code> elements. </li>
        <li><em>roadMark</em>:<b> </b>Retrieves a road&#39;s marks as wkbMultiLineString.</li>
        <li><em>signal</em>:<b> </b>Retrieves a road&#39;s signals as wkbPoint. </li>
        <li><em>objectPoint</em>:<b> </b>Retrieves a road&#39;s point objects as wkbPoint.</li>
        <li><em>objectLine</em>:<b> </b>Retrieves a road&#39;s linear objects as wkbLineString.</li>
        <li><em>objectPolygon</em>:<b> </b>Retrieves a road&#39;s polygonal objects as wkbPolygon. </li>
    </ul>
    <p>
        Further information about these elements can be found in the <a href="http://www.opendrive.org/docs/OpenDRIVEFormatSpecRev1.4H.pdf">format specification 1.4H</a>.
    </p>

    <p>These OpenDRIVE element classes are converted into individual OGR layers. Hence, the driver is capable to retrieve not only their geometries but also their attributes. In OpenDRIVE all the elements are related to the road&#39;s <code>refereceLine</code> record. Therefore, in addition to their native attributes, each layer has a <code>roadId</code> attribute (foreign key to the parent <code>referenceLine</code>).</p>

    <p>All coordinates are relative to the reference system defined inside the XML header as shown in this example:</p>

    <div style="background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;">
        <pre style="margin: 0; line-height: 125%"><span style="color: #007700">&lt;header</span> <span style="color: #0000CC">revMajor=</span><span style="background-color: #fff0f0">&quot;1&quot;</span> <span style="color: #0000CC">revMinor=</span><span style="background-color: #fff0f0">&quot;4&quot;</span> </pre>
        <pre style="margin: 0; line-height: 125%"> <span style="color: #0000CC">    name=</span><span style="background-color: #fff0f0">&quot;fancy dataset&quot;</span> <span style="color: #0000CC">date=</span><span style="background-color: #fff0f0">&quot;12-12-2012&quot;</span> <span style="color: #0000CC">north=</span><span style="background-color: #fff0f0">&quot;5.435122298357e+06&quot;</span> <span style="color: #0000CC">east=</span><span style="background-color: #fff0f0">&quot;5.435122298357e+06&quot;</span> </pre>
        <pre style="margin: 0; line-height: 125%">     <span style="color: #0000CC">south=</span><span style="background-color: #fff0f0">&quot;5.435122298357e+06&quot;</span> <span style="color: #0000CC">west=</span><span style="background-color: #fff0f0">&quot;5.435122298357e+06&quot;</span> <span style="color: #0000CC">vendor=</span><span style="background-color: #fff0f0">&quot;We are the greatest. Period.&quot;</span><span style="color: #007700">&gt;</span>
  &lt;<span style="color: #007700">geoReference&gt;</span><span style="color: #557799">&lt;![CDATA[+proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=500000 +y_0=0 +datum=WGS84 +units=m +no_defs]]&gt;</span><span style="color: #007700">&lt;/geoReference&gt;</span>
<span style="color: #007700">&lt;/header&gt;</span></pre>
    </div>


    <h3>Example</h3>
    <p>The ogr2ogr utility can be used to extract OpenDRIVE elments to ESRI Shapefiles: </p>
    <ul>
        <li>
            <p><em>ogr2ogr -f "ESRI Shapefile" roadNetworkPointObjects.shp roadNetwork.xodr objectPoint</em></p>
            <p>The command line shown above parses an OpenDRIVE XML file called <code>roadNetwork.xodr</code>, extracts the road objects whose geometry is of the type point and writes them into the <code>roadNetworkPointObjects.shp</code> Shapefile. The OpenDRIVE element class which is to be extracted is specified as layer creation option and defined as the last parameter of the function call, which in this case is <em>objectPoint</em>.</p>
        </li>
        <li>
            <p><em>ogr2ogr -f "ESRI Shapefile" roadMarks.shp germanRoad.xodr roadMark</em></p>
            <p>The command line shown above parses the file <code>germanRoad.xodr</code>, extracts it&#39;s road marks and writes them into a Shapefile called <code>roadMarks.shp</code>.</p>
        </li>
    </ul>

    <h3>See Also</h3>
    <ul>
        <li>Home page for OpenDRIVE format: <a href="http://www.opendrive.org/" target="_blank">http://www.opendrive.org/</a></li>
        <li>XODR GitHub repository: <a href="https://github.com/DLR-TS/xodr" target="_blank">https://github.com/DLR-TS/xodr</a></li>
    </ul>
</body>
</html>
